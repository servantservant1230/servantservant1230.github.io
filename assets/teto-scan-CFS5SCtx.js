import"./styles-CQEqC4-o.js";import{e as h}from"./score-B4IAOyqW.js";import"./types-CWP0aW2C.js";const r=document.querySelector("#upload"),n=document.querySelector("#preview"),i=document.querySelector("#analyze"),c=document.querySelector("#status"),d=n.getContext("2d",{willReadFrequently:!0});let u=!1;function m(t){const o=Math.min(t.width,t.height),e=(t.width-o)/2,a=(t.height-o)/2;d.clearRect(0,0,n.width,n.height),d.drawImage(t,e,a,o,o,0,0,n.width,n.height)}r.onchange=()=>{const t=r.files?.[0];if(!t)return;const o=URL.createObjectURL(t),e=new Image;e.onload=()=>{m(e),u=!0,c.textContent="사진 업로드 완료",URL.revokeObjectURL(o)},e.src=o};function g(t,o,e){return Math.max(o,Math.min(e,t))}i.onclick=async()=>{if(!u){c.textContent="먼저 사진을 업로드해 주세요.";return}i.disabled=!0,c.textContent="테토/에겐 무드 계산 중...";const t=document.createElement("canvas");t.width=224,t.height=224,t.getContext("2d").drawImage(n,0,0,224,224);const o=t.getContext("2d").getImageData(0,0,224,224),e=h(o),a=.9*e[5]+.7*e[2]+.2*(1-e[4])+.15*Math.abs(e[1]),s=g(Math.round(a/2*100),0,100),l=100-s;sessionStorage.setItem("teto_result",JSON.stringify({teto:s,egen:l})),sessionStorage.setItem("teto_face",n.toDataURL("image/jpeg",.9)),window.location.href="/teto-result.html"};
