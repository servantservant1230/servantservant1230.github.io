import"./styles-Cefnxvbk.js";import{i as S}from"./ads-D-IuExRI.js";import{N as v}from"./types-CWP0aW2C.js";const p=document.querySelector("#result"),r=document.querySelector("#share-link"),d=sessionStorage.getItem("nsolo_result"),m=sessionStorage.getItem("nsolo_face"),b=new URLSearchParams(location.search),l=b.get("lang")||"ko",h={ko:{title:"나는 솔로에 나간다면 나의 이름은?",subtitle:"Top 3 이름 결과를 확인해보세요.",retry:"다시 분석",empty:"결과가 없습니다. 다시 분석해주세요.",uncertain:"유사한 타입이 겹쳐 보여요. 더 정면/근거리 얼굴 사진으로 다시 시도해보세요."},en:{title:"If you joined I AM SOLO, what would your name be?",subtitle:"Check your Top 3 name results.",retry:"Try Again",empty:"No result found. Please run analysis again.",uncertain:"The top matches are very close. Try again with a clearer front-face photo."},ja:{title:"나는 솔로 に出たら、私の名前は？",subtitle:"Top 3 名前の結果を確認してください。",retry:"もう一度分析",empty:"結果がありません。もう一度分析してください。",uncertain:"上位候補が近すぎます。正面で鮮明な顔写真で再試行してください。"}},a=h[l]||h.ko,y=document.querySelector(".hero h1"),g=document.querySelector(".hero p"),c=document.querySelector(".row .btn.ghost");y&&(y.textContent=a.title);g&&(g.textContent=a.subtitle);c&&(c.textContent=a.retry,c.href=`/scan.html?lang=${encodeURIComponent(l)}`);function x(n){return btoa(unescape(encodeURIComponent(JSON.stringify(n.map(t=>({slug:t.slug,p:t.p}))))))}function $(n){if(!n)return null;try{return JSON.parse(decodeURIComponent(escape(atob(n))))}catch{return null}}const f=$(b.get("r"));let s=null;if(d)s=JSON.parse(d);else if(f){const n=new Map(v.map(t=>[t.slug,t]));s=f.map(t=>{const o=n.get(t.slug);return o?{...o,p:t.p}:null}).filter(Boolean)}if(!s?.length)p.innerHTML=`<p>${a.empty}</p>`;else{const t=(s[0]?.p??0)-(s[1]?.p??0)<8?`<div class="card"><p class="muted">${a.uncertain}</p></div>`:"",o=m?`<div class="card"><small class="muted">탐지된 얼굴</small><div style="margin-top:8px"><img src="${m}" alt="detected face" style="width:100%;max-width:220px;border-radius:16px;border:1px solid #dbe5f3;display:block"/></div></div>`:"";p.innerHTML=t+o+s.map((e,i)=>{const w=Number.isFinite(e.p)?e.p:0,u=Math.max(0,Math.min(100,Math.round(w*10)/10));return`
    <div class="card result-card ${i===0?"top-card":""}">
      <small class="muted">${i+1}순위</small>
      <div class="result-top">${e.label} <span class="muted" style="font-size:22px">${u}%</span></div>
      <p>${e.desc}</p>
      <div class="bar"><i style="width:${u}%"></i></div>
    </div>`}).join(""),r&&(r.onclick=async()=>{const e=new URL(location.href);e.searchParams.set("lang",l),e.searchParams.set("r",x(s));const i=`${e.origin}${e.pathname}?${e.searchParams.toString()}`;await navigator.clipboard.writeText(i),r.textContent="복사됨!",setTimeout(()=>{r&&(r.textContent="결과 링크 복사")},1200)})}S();
