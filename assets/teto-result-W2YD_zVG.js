import"./styles-CQEqC4-o.js";const $=document.querySelector("#result"),O=document.querySelector("#save-image"),m=document.querySelector("#toast"),L=sessionStorage.getItem("teto_result"),g=sessionStorage.getItem("teto_face");function E(e){m&&(m.innerHTML=`<strong>${e}</strong>`,m.classList.add("show"),setTimeout(()=>m.classList.remove("show"),1500))}if(!L)$.innerHTML="<div class='card'><p>결과가 없습니다. 다시 분석해 주세요.</p><a class='btn' href='/teto-scan.html'>나도 해보기</a></div>";else{const{teto:e,egen:o}=JSON.parse(L),u=e>=60?"테토 무드 우세":o>=60?"에겐 무드 우세":"밸런스 무드",k=e>=60?"/mood/teto.html":o>=60?"/mood/egen.html":"/mood/balance.html";$.innerHTML=`
  <div class='card'>
    <small class='muted'>한눈에 보기</small>
    <div class='result-top'>${u}</div>
    <p class='muted'>의학/호르몬 예측이 아닌 오락용 인상 분류입니다.</p>
    <a class='btn ghost' href='${k}'>무드 설명 보기</a>
  </div>
  ${g?`<div class='card'><small class='muted'>탐지된 얼굴</small><img src='${g}' alt='face' style='display:block;max-width:240px;width:100%;border-radius:14px;margin-top:8px;border:1px solid #dbe5f3'/></div>`:""}
  <div class='card'>
    <div class='row' style='justify-content:space-between'><strong>테토</strong><strong>${e}%</strong></div>
    <div class='bar'><i style='width:${e}%'></i></div>
    <div class='row' style='justify-content:space-between;margin-top:10px'><strong>에겐</strong><strong>${o}%</strong></div>
    <div class='bar'><i style='width:${o}%;background:#93c5fd'></i></div>
  </div>`,O.onclick=async()=>{const s=document.createElement("canvas");s.width=1080,s.height=1350;const t=s.getContext("2d"),r=t.createLinearGradient(0,0,1080,1350);r.addColorStop(0,"#05060f"),r.addColorStop(.45,"#131a3a"),r.addColorStop(1,"#3a1a6b"),t.fillStyle=r,t.fillRect(0,0,s.width,s.height);const y=t.createRadialGradient(900,150,40,900,150,260);y.addColorStop(0,"rgba(34,211,238,0.35)"),y.addColorStop(1,"rgba(34,211,238,0)"),t.fillStyle=y,t.beginPath(),t.arc(900,150,260,0,Math.PI*2),t.fill();const h=t.createRadialGradient(170,1160,30,170,1160,280);if(h.addColorStop(0,"rgba(192,132,252,0.32)"),h.addColorStop(1,"rgba(192,132,252,0)"),t.fillStyle=h,t.beginPath(),t.arc(170,1160,280,0,Math.PI*2),t.fill(),t.fillStyle="#67e8f9",t.font="800 30px system-ui",t.fillText("TETO / EGEN MOOD",72,86),t.fillStyle="#ffffff",t.font="900 64px system-ui",t.fillText("관상 무드 비율 결과",72,154),t.font="800 52px system-ui",t.fillStyle="#22d3ee",t.fillText(`테토 ${e}%`,72,238),t.fillStyle="#c084fc",t.fillText(`에겐 ${o}%`,360,238),g){const l=await new Promise((P,I)=>{const f=new Image;f.onload=()=>P(f),f.onerror=I,f.src=g}),b=72,p=282,c=420,d=420,w=Math.max(c/l.width,d/l.height),T=l.width*w,R=l.height*w,C=b+(c-T)/2,M=p+(d-R)/2;t.save(),t.beginPath(),t.roundRect(b,p,c,d,28),t.clip(),t.drawImage(l,C,M,T,R),t.restore(),t.strokeStyle="rgba(255,255,255,0.55)",t.lineWidth=3,t.strokeRect(b,p,c,d)}const i=540,a=282,x=468,S=420;t.fillStyle="rgba(255,255,255,0.06)",t.fillRect(i,a,x,S),t.strokeStyle="rgba(103,232,249,0.35)",t.lineWidth=2,t.strokeRect(i,a,x,S),t.fillStyle="#ffffff",t.font="700 34px system-ui",t.fillText("한눈에 보기",i+28,a+56),t.font="800 44px system-ui",t.fillStyle="#f0abfc",t.fillText(u,i+28,a+126),t.fillStyle="#cbd5e1",t.font="500 24px system-ui",t.fillText("오락용 인상 분류입니다",i+28,a+172),t.fillText("의학/호르몬 예측이 아닙니다",i+28,a+206),t.fillStyle="rgba(255,255,255,0.16)",t.fillRect(72,770,936,18),t.fillStyle="#22d3ee",t.fillRect(72,770,Math.round(936*(e/100)),18),t.fillStyle="#67e8f9",t.font="800 42px system-ui",t.fillText(`테토 ${e}%`,72,845),t.fillStyle="#c084fc",t.fillText(`에겐 ${o}%`,760,845),t.fillStyle="#dbeafe",t.font="600 28px system-ui",t.fillText("나도 해보기: servantservant1230.github.io/teto-scan.html",72,1270),t.fillStyle="rgba(255,255,255,0.72)",t.font="500 23px system-ui",t.fillText("오락용 인상 분류 · 실존 인물 식별/호르몬 예측 아님",72,1312);const v=await new Promise(l=>s.toBlob(l,"image/png"));if(!v)return;const n=document.createElement("a");n.href=URL.createObjectURL(v),n.download="teto-egen-result.png",document.body.appendChild(n),n.click(),n.remove(),URL.revokeObjectURL(n.href),E("결과 이미지 저장 완료")}}
