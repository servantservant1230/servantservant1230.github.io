import"./styles-CQEqC4-o.js";import{i as H}from"./ads-D-IuExRI.js";import{N as R}from"./types-CWP0aW2C.js";const x=document.querySelector("#result"),p=document.querySelector("#share-image"),v=sessionStorage.getItem("nsolo_result");let d=sessionStorage.getItem("nsolo_face");const T=new URLSearchParams(location.search),$=T.get("lang")||"ko",C={ko:{title:"나는 솔로에 나간다면 나의 이름은?",subtitle:"Top 3 이름 결과를 확인해보세요.",retry:"다시 분석",empty:"결과가 없습니다. 다시 분석해주세요.",uncertain:"유사한 타입이 겹쳐 보여요. 더 정면/근거리 얼굴 사진으로 다시 시도해보세요.",confidenceHigh:"매칭 신뢰도 높음",confidenceMid:"매칭 신뢰도 보통",confidenceLow:"매칭 신뢰도 낮음",retryGuide:"정면/밝은 조명/단독 얼굴로 다시 촬영하면 정확도가 올라갑니다.",topHint:"인상 키워드 기반으로 가장 가까운 타입입니다.",shareSocial:"친구에게 공유하기",shareImage:"결과 이미지 저장",shareLink:"링크 복사",copied:"복사됨!",copiedDesc:"친구에게 링크를 붙여넣어 공유해보세요.",shareOpened:"공유창이 열렸어요",copyFallback:"복사가 막혀서 수동 복사창을 열었어요.",topPick:"오늘의 시그니처 타입",facePreview:"탐지된 얼굴",shareCardTitle:"나의 나는솔로 이름은",shareCardBadge:"오락용 인상 매칭 · 실제 나는솔로 출연자 사진 학습 아님"},en:{title:"If you joined I AM SOLO, what would your name be?",subtitle:"Check your Top 3 name results.",retry:"Try Again",empty:"No result found. Please run analysis again.",uncertain:"The top matches are very close. Try again with a clearer front-face photo.",confidenceHigh:"Match confidence: High",confidenceMid:"Match confidence: Medium",confidenceLow:"Match confidence: Low",retryGuide:"Retry with a front-facing, well-lit, single-face photo for better accuracy.",topHint:"Closest type based on visual impression keywords.",shareSocial:"Share with friends",shareImage:"Save Image",shareLink:"Copy Link",copied:"Copied!",copiedDesc:"Paste the link to share with friends.",shareOpened:"Share sheet opened",copyFallback:"Clipboard blocked. Opened manual copy prompt.",topPick:"Today's signature type",facePreview:"Detected face",shareCardTitle:"My I AM SOLO name is",shareCardBadge:"Entertainment impression match · not trained on I AM SOLO cast photos"},ja:{title:"나는 솔로 に出たら、私の名前は？",subtitle:"Top 3 名前の結果を確認してください。",retry:"もう一度分析",empty:"結果がありません。もう一度分析してください。",uncertain:"上位候補が近すぎます。正面で鮮明な顔写真で再試行してください。",confidenceHigh:"マッチ信頼度: 高い",confidenceMid:"マッチ信頼度: 普通",confidenceLow:"マッチ信頼度: 低い",retryGuide:"正面・明るい環境・単独の顔写真で再試行すると精度が上がります。",topHint:"印象キーワードベースで最も近いタイプです。",shareSocial:"友だちに共有",shareImage:"画像を保存",shareLink:"リンクをコピー",copied:"コピー完了!",copiedDesc:"リンクを貼り付けて友だちに共有できます。",shareOpened:"共有シートを開きました",copyFallback:"クリップボードが使えないため手動コピー画面を開きました。",topPick:"今日のシグネチャータイプ",facePreview:"検出された顔",shareCardTitle:"私の I AM SOLO 名前は",shareCardBadge:"エンタメ用印象マッチ · 나는솔로出演者写真を学習していません"}},i=C[$]||C.ko,k=document.querySelector(".hero h1"),M=document.querySelector(".hero p"),f=document.querySelector("a.btn.ghost[href^='/scan.html']");document.querySelector("#toast");k&&(k.textContent=i.title);M&&(M.textContent=i.subtitle);p&&(p.textContent=i.shareImage);f&&(f.textContent=i.retry,f.href=`/scan.html?lang=${encodeURIComponent($)}`);function A(t){if(!t)return null;try{return JSON.parse(decodeURIComponent(escape(atob(t))))}catch{return null}}function U(){const t=new URL(location.href);return`${t.origin}/scan.html?v=${t.searchParams.get("v")||"latest"}`}async function B(t){const c=document.createElement("canvas");c.width=1080,c.height=1350;const e=c.getContext("2d"),l=e.createLinearGradient(0,0,1080,1350);l.addColorStop(0,"#101827"),l.addColorStop(.5,"#1e1b4b"),l.addColorStop(1,"#312e81"),e.fillStyle=l,e.fillRect(0,0,c.width,c.height),e.fillStyle="rgba(255,255,255,0.12)",e.beginPath(),e.arc(900,180,220,0,Math.PI*2),e.fill(),e.beginPath(),e.arc(200,1160,280,0,Math.PI*2),e.fill(),e.fillStyle="#dbeafe",e.font="700 30px system-ui",e.fillText("AI FACE MATCH",80,84),e.fillStyle="#ffffff",e.font="800 64px system-ui",e.fillText(i.shareCardTitle,80,156);const u=t[0];if(e.fillStyle="#a5b4fc",e.font="700 44px system-ui",e.fillText(`${u?.label??"-"} 타입`,80,214),d){const s=d;try{const n=await new Promise((I,O)=>{const h=new Image;h.onload=()=>I(h),h.onerror=O,h.src=s}),o=280,a=280,y=80,g=250,b=Math.max(o/n.width,a/n.height),w=n.width*b,S=n.height*b,L=y+(o-w)/2,P=g+(a-S)/2;e.save(),e.beginPath(),e.roundRect(y,g,o,a,28),e.clip(),e.drawImage(n,L,P,w,S),e.restore(),e.strokeStyle="rgba(255,255,255,0.6)",e.lineWidth=3,e.strokeRect(y,g,o,a)}catch{}}return t.forEach((s,n)=>{const o=860+n*140,a=Math.round(s.p*10)/10;e.fillStyle="#ffffff",e.font=n===0?"800 46px system-ui":"700 38px system-ui",e.fillText(`${n+1}. ${s.label}`,90,o),e.fillStyle="#c7d2fe",e.font="700 30px system-ui",e.fillText(`${a}%`,420,o),e.fillStyle="rgba(255,255,255,0.18)",e.fillRect(520,o-30,460,20),e.fillStyle=n===0?"#fbbf24":"#93c5fd",e.fillRect(520,o-30,Math.max(14,Math.min(460,a*4.6)),20),e.fillStyle="#dbeafe",e.font="500 24px system-ui",e.fillText(s.desc,90,o+38)}),e.fillStyle="rgba(255,255,255,0.72)",e.font="500 23px system-ui",e.fillText(i.shareCardBadge,80,1258),e.font="600 24px system-ui",e.fillText(`나도 해보기: ${U()}`,80,1294),c}const m=A(T.get("r"));let r=null;if(v)r=JSON.parse(v);else if(m?.rows){const t=new Map(R.map(c=>[c.slug,c]));r=m.rows.map(c=>{const e=t.get(c.slug);return e?{...e,p:c.p}:null}).filter(Boolean)}m?.face&&!d&&(d=m.face);if(r?.length){const t=(r[0]?.p??0)-(r[1]?.p??0),c=t>=14?i.confidenceHigh:t>=8?i.confidenceMid:i.confidenceLow,e=t>=14?"confidence-high":t>=8?"confidence-mid":"confidence-low",l=t<8?`<div class="card"><p class="muted">${i.uncertain}</p><small class="muted">${i.retryGuide}</small></div>`:"",u=d?`<div class="card"><small class="muted">${i.facePreview}</small><div style="margin-top:8px"><img src="${d}" alt="detected face" style="width:100%;max-width:220px;border-radius:16px;border:1px solid #dbe5f3;display:block"/></div></div>`:"";x.innerHTML=`<div class="card confidence-card ${e}"><small class="kicker">${i.topPick}</small><br/><strong>${c}</strong><br/><small class="muted">${i.topHint}</small></div>`+l+u+r.map((s,n)=>{const o=Number.isFinite(s.p)?s.p:0,a=Math.max(0,Math.min(100,Math.round(o*10)/10));return`
    <div class="card result-card ${n===0?"top-card":""}">
      <small class="muted">${n+1}순위</small>
      <div class="result-top">${s.label} <span class="muted" style="font-size:22px">${a}%</span></div>
      <p>${s.desc}</p>
      <div class="bar"><i style="width:${a}%"></i></div>
    </div>`}).join(""),p&&(p.onclick=async()=>{const s=await B(r),n=await new Promise(a=>s.toBlob(a,"image/png"));if(!n)return;const o=new File([n],"nsolo-result.png",{type:"image/png"});try{if(navigator.share&&navigator.canShare?.({files:[o]}))await navigator.share({files:[o],title:"나는솔로 테스트 결과"});else{const a=document.createElement("a");a.href=URL.createObjectURL(n),a.download="nsolo-result.png",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(a.href)}}catch{}})}else{x.innerHTML=`<p>${i.empty}</p><div class="card"><a class="btn" href="/scan.html">나도 해보기</a></div>`;const t=document.querySelector(".sticky-cta");t&&(t.style.display="none"),f&&(f.style.display="none")}H();
