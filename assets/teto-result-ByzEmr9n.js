import"./styles-CQEqC4-o.js";const L=document.querySelector("#result"),E=document.querySelector("#save-image"),m=document.querySelector("#toast"),k=sessionStorage.getItem("teto_result"),g=sessionStorage.getItem("teto_face");function H(e){m&&(m.innerHTML=`<strong>${e}</strong>`,m.classList.add("show"),setTimeout(()=>m.classList.remove("show"),1500))}if(!k)L.innerHTML="<div class='card'><p>결과가 없습니다. 다시 분석해 주세요.</p><a class='btn' href='/teto-scan.html'>나도 해보기</a></div>";else{const{teto:e,egen:l}=JSON.parse(k),u=e>=60?"테토 무드 우세":l>=60?"에겐 무드 우세":"밸런스 무드",C=e>=60?"/mood/teto.html":l>=60?"/mood/egen.html":"/mood/balance.html",x=e>=60?"선이 또렷하고 강단 있는 분위기로 보이는 편이에요.":l>=60?"부드럽고 섬세한 분위기로 보이는 편이에요.":"강함과 부드러움이 균형 잡힌 분위기로 보이는 편이에요.";L.innerHTML=`
  <div class='card'>
    <small class='muted'>한눈에 보기</small>
    <div class='result-top'>${u}</div>
    <p class='muted'>${x}</p>
    <a class='btn ghost' href='${C}'>무드 설명 보기</a>
  </div>
  ${g?`<div class='card'><small class='muted'>탐지된 얼굴</small><img src='${g}' alt='face' style='display:block;max-width:240px;width:100%;border-radius:14px;margin-top:8px;border:1px solid #dbe5f3'/></div>`:""}
  <div class='card'>
    <div class='row' style='justify-content:space-between'><strong>테토</strong><strong>${e}%</strong></div>
    <div class='bar'><i style='width:${e}%'></i></div>
    <div class='row' style='justify-content:space-between;margin-top:10px'><strong>에겐</strong><strong>${l}%</strong></div>
    <div class='bar'><i style='width:${l}%;background:#c084fc;box-shadow:0 0 10px rgba(192,132,252,.55)'></i></div>
  </div>`,E.onclick=async()=>{const s=document.createElement("canvas");s.width=1080,s.height=1350;const t=s.getContext("2d"),n=t.createLinearGradient(0,0,1080,1350);n.addColorStop(0,"#05060f"),n.addColorStop(.45,"#131a3a"),n.addColorStop(1,"#3a1a6b"),t.fillStyle=n,t.fillRect(0,0,s.width,s.height);const y=t.createRadialGradient(900,150,40,900,150,260);y.addColorStop(0,"rgba(34,211,238,0.35)"),y.addColorStop(1,"rgba(34,211,238,0)"),t.fillStyle=y,t.beginPath(),t.arc(900,150,260,0,Math.PI*2),t.fill();const h=t.createRadialGradient(170,1160,30,170,1160,280);if(h.addColorStop(0,"rgba(192,132,252,0.32)"),h.addColorStop(1,"rgba(192,132,252,0)"),t.fillStyle=h,t.beginPath(),t.arc(170,1160,280,0,Math.PI*2),t.fill(),t.fillStyle="#67e8f9",t.font="800 30px system-ui",t.fillText("TETO / EGEN MOOD",72,86),t.fillStyle="#ffffff",t.font="900 64px system-ui",t.fillText("관상 무드 비율 결과",72,154),t.font="800 52px system-ui",t.fillStyle="#22d3ee",t.fillText(`테토 ${e}%`,72,238),t.fillStyle="#c084fc",t.fillText(`에겐 ${l}%`,360,238),g){const o=await new Promise((I,O)=>{const f=new Image;f.onload=()=>I(f),f.onerror=O,f.src=g}),b=72,p=282,r=420,d=420,T=Math.max(r/o.width,d/o.height),R=o.width*T,$=o.height*T,M=b+(r-R)/2,P=p+(d-$)/2;t.save(),t.beginPath(),t.roundRect(b,p,r,d,28),t.clip(),t.drawImage(o,M,P,R,$),t.restore(),t.strokeStyle="rgba(255,255,255,0.55)",t.lineWidth=3,t.strokeRect(b,p,r,d)}const i=540,c=282,S=468,v=420;t.fillStyle="rgba(255,255,255,0.06)",t.fillRect(i,c,S,v),t.strokeStyle="rgba(103,232,249,0.35)",t.lineWidth=2,t.strokeRect(i,c,S,v),t.fillStyle="#ffffff",t.font="700 34px system-ui",t.fillText("한눈에 보기",i+28,c+56),t.font="800 44px system-ui",t.fillStyle="#f0abfc",t.fillText(u,i+28,c+126),t.fillStyle="#cbd5e1",t.font="500 24px system-ui",t.fillText(x,i+28,c+182),t.fillStyle="rgba(255,255,255,0.16)",t.fillRect(72,760,936,18),t.fillStyle="#22d3ee",t.fillRect(72,760,Math.round(936*(e/100)),18),t.fillStyle="rgba(255,255,255,0.16)",t.fillRect(72,810,936,18),t.fillStyle="#c084fc",t.fillRect(72,810,Math.round(936*(l/100)),18),t.fillStyle="#67e8f9",t.font="800 42px system-ui",t.fillText(`테토 ${e}%`,72,900),t.fillStyle="#c084fc",t.fillText(`에겐 ${l}%`,760,900),t.fillStyle="#dbeafe",t.font="600 28px system-ui",t.fillText("나도 해보기: servantservant1230.github.io/teto-scan.html",72,1270),t.fillStyle="rgba(255,255,255,0.72)",t.font="500 23px system-ui",t.fillText("테토/에겐 관상 무드 비율 · 재미용 테스트",72,1312);const w=await new Promise(o=>s.toBlob(o,"image/png"));if(!w)return;const a=document.createElement("a");a.href=URL.createObjectURL(w),a.download="teto-egen-result.png",document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(a.href),H("결과 이미지 저장 완료")}}
