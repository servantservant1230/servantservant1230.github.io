import"./styles-CQEqC4-o.js";const S=document.querySelector("#result"),I=document.querySelector("#save-image"),m=document.querySelector("#toast"),w=sessionStorage.getItem("teto_result"),g=sessionStorage.getItem("teto_face");function O(e){m&&(m.innerHTML=`<strong>${e}</strong>`,m.classList.add("show"),setTimeout(()=>m.classList.remove("show"),1500))}if(!w)S.innerHTML="<div class='card'><p>결과가 없습니다. 다시 분석해 주세요.</p><a class='btn' href='/teto-scan.html'>나도 해보기</a></div>";else{const{teto:e,egen:s}=JSON.parse(w),y=e>=60?"테토 무드 우세":s>=60?"에겐 무드 우세":"밸런스 무드",T=e>=60?"/mood/teto.html":s>=60?"/mood/egen.html":"/mood/balance.html";S.innerHTML=`
  <div class='card'>
    <small class='muted'>한눈에 보기</small>
    <div class='result-top'>${y}</div>
    <p class='muted'>의학/호르몬 예측이 아닌 오락용 인상 분류입니다.</p>
    <a class='btn ghost' href='${T}'>무드 설명 보기</a>
  </div>
  ${g?`<div class='card'><small class='muted'>탐지된 얼굴</small><img src='${g}' alt='face' style='display:block;max-width:240px;width:100%;border-radius:14px;margin-top:8px;border:1px solid #dbe5f3'/></div>`:""}
  <div class='card'>
    <div class='row' style='justify-content:space-between'><strong>테토</strong><strong>${e}%</strong></div>
    <div class='bar'><i style='width:${e}%'></i></div>
    <div class='row' style='justify-content:space-between;margin-top:10px'><strong>에겐</strong><strong>${s}%</strong></div>
    <div class='bar'><i style='width:${s}%;background:#93c5fd'></i></div>
  </div>`,I.onclick=async()=>{const o=document.createElement("canvas");o.width=1080,o.height=1350;const t=o.getContext("2d"),c=t.createLinearGradient(0,0,1080,1350);if(c.addColorStop(0,"#0f172a"),c.addColorStop(.5,"#1e1b4b"),c.addColorStop(1,"#312e81"),t.fillStyle=c,t.fillRect(0,0,o.width,o.height),t.fillStyle="rgba(255,255,255,0.1)",t.beginPath(),t.arc(920,170,200,0,Math.PI*2),t.fill(),t.beginPath(),t.arc(160,1180,220,0,Math.PI*2),t.fill(),t.fillStyle="#dbeafe",t.font="700 30px system-ui",t.fillText("TETO / EGEN MOOD",72,86),t.fillStyle="#ffffff",t.font="800 62px system-ui",t.fillText("관상 무드 비율 결과",72,154),t.font="800 52px system-ui",t.fillStyle="#f8fafc",t.fillText(`테토 ${e}%`,72,238),t.fillStyle="#bfdbfe",t.fillText(`에겐 ${s}%`,360,238),g){const l=await new Promise((M,P)=>{const d=new Image;d.onload=()=>M(d),d.onerror=P,d.src=g}),b=72,h=282,r=420,f=420,x=Math.max(r/l.width,f/l.height),p=l.width*x,v=l.height*x,R=b+(r-p)/2,k=h+(f-v)/2;t.save(),t.beginPath(),t.roundRect(b,h,r,f,28),t.clip(),t.drawImage(l,R,k,p,v),t.restore(),t.strokeStyle="rgba(255,255,255,0.55)",t.lineWidth=3,t.strokeRect(b,h,r,f)}const a=540,n=282,$=468,L=420;t.fillStyle="rgba(255,255,255,0.08)",t.fillRect(a,n,$,L),t.fillStyle="#ffffff",t.font="700 34px system-ui",t.fillText("한눈에 보기",a+28,n+56),t.font="800 44px system-ui",t.fillStyle="#fde68a",t.fillText(y,a+28,n+126),t.fillStyle="#cbd5e1",t.font="500 24px system-ui",t.fillText("오락용 인상 분류입니다",a+28,n+172),t.fillText("의학/호르몬 예측이 아닙니다",a+28,n+206),t.fillStyle="rgba(255,255,255,0.2)",t.fillRect(72,770,936,18),t.fillStyle="#fbbf24",t.fillRect(72,770,Math.round(936*(e/100)),18),t.fillStyle="#ffffff",t.font="700 40px system-ui",t.fillText(`테토 ${e}%`,72,845),t.fillStyle="#93c5fd",t.fillText(`에겐 ${s}%`,760,845),t.fillStyle="#dbeafe",t.font="600 28px system-ui",t.fillText("나도 해보기: servantservant1230.github.io/teto-scan.html",72,1270),t.fillStyle="rgba(255,255,255,0.72)",t.font="500 23px system-ui",t.fillText("오락용 인상 분류 · 실존 인물 식별/호르몬 예측 아님",72,1312);const u=await new Promise(l=>o.toBlob(l,"image/png"));if(!u)return;const i=document.createElement("a");i.href=URL.createObjectURL(u),i.download="teto-egen-result.png",document.body.appendChild(i),i.click(),i.remove(),URL.revokeObjectURL(i.href),O("결과 이미지 저장 완료")}}
